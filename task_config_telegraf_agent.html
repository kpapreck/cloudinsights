<!DOCTYPE html>
<html lang="en">
  <head>
  <title>Configuring an Agent to Collect Data | NetApp Cloud Docs</title>
  <meta charset="utf-8">
  <meta property="og:title" content="Configuring an Agent to Collect Data | NetApp Cloud Docs" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://docs.netapp.com/cloudinsights/task_config_telegraf_agent.html" />
	<meta property="og:description" content="" />
  <meta property="og:image" content="https://docs.netapp.com/cloudinsights/images/logo-tophat-social.png" />
  <meta property="og:image:alt" content="NetApp Logo" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
  <meta http-equiv="encoding" content="utf-8">
  <meta http-equiv="nss-type" content="Product Documentation"/>
  <meta http-equiv="nss-subtype" content="User Guide"/>
  
  <meta name="description" content="">
  <meta name="keywords" content=" telegraf, installation, install, agent, telegraf agent">
  

  <!-- Icons -->
  <link rel="icon" href="/cloudinsights/images/favicon.ico" type="image/x-icon">

  <!-- RSS Feed -->
  
  <link rel="alternate" type="application/rss+xml" title="NetApp Cloud Docs" href="/cloudinsights/feed.xml">
  

  <!-- CSS Definitions: NetApp CSS should be defined after generic css -->

  <!-- Elastic Search -->
  <link rel="stylesheet" href="//cdn.jsdelivr.net/searchkit/0.10.0/theme.css">

  <!-- LUCI CSS Content -->
  <link rel="stylesheet" href="/cloudinsights/common/css/esb.min.css">
  <link rel="stylesheet" href="/cloudinsights/common/css/netapp-library.min.css">
  <link rel="stylesheet" href="/cloudinsights/common/css/doc.css">
  <link rel="stylesheet" href="/cloudinsights/common/css/doc-components.css">

  <link rel="stylesheet" href='/cloudinsights/css/na-sidebar.css' type='text/css'>
  <link rel='stylesheet' href='/cloudinsights/css/na-search.css' type='text/css'>
  <link rel='stylesheet' href='/cloudinsights/css/clouddocs.css' type='text/css'>

  <!-- Font awesome seems to affect our GitHub Icon and generic "arrow box" for external links. -->
  <link rel="stylesheet" type="text/css" href="/cloudinsights/css/font-awesome.min.css">
  <!-- <link rel="stylesheet" href="/cloudinsights/css/customstyles.css"> -->
  <!-- Controls the shadow effect for search dropdown menu -->
  <link rel="stylesheet" href="/cloudinsights/css/boxshadowproperties.css">

  <!-- NetApp CSS controls the technical content -->
  <link rel='stylesheet' href='/cloudinsights/css/netapp.css' type='text/css'>

  

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <!-- Used to import Promise for IE. Required for SearchKit -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script>
  
    <script src='/cloudinsights/js/na-search.js'></script>
  

  
  <link rel='stylesheet' href='/cloudinsights/css/na-pagenav.css' type='text/css' id="pagenav-css">
  <script src='/cloudinsights/js/na-pagenav.js'></script>
  

  <link rel='stylesheet' href='/cloudinsights/css/prism.css' type='text/css'>
  <link rel='stylesheet' href='/cloudinsights/css/prism-netapp.css' type='text/css'>

  <script src='/cloudinsights/js/clouddocs.js'></script>
  <script src='/cloudinsights/js/s_code_impl.js'></script>
  <script src='/cloudinsights/js/jquery.navgoco.min.js'></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <script src='/cloudinsights/js/toc.js'></script>
  <script src='/cloudinsights/js/customscripts.js'></script>

  <script>
      $(document).ready(function() {
          // Initialize navgoco with default options
          $("#mysidebar").navgoco({
              caretHtml: '',
              accordion: true,
              openClass: 'active', // open
              save: false, // leave false or nav highlighting doesn't work right
              cookie: {
                  name: 'navgoco',
                  expires: false,
                  path: '/'
              },
              slide: {
                  duration: 400,
                  easing: 'swing'
              }
          });

          $("#collapseAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', false);
          });

          $("#expandAll").click(function(e) {
              e.preventDefault();
              $("#mysidebar").navgoco('toggle', true);
          });

      });

  </script>
  <script>
      $(document).ready(function() {
          $("#tg-sb-link").click(function() {
              $("#tg-sb-sidebar").toggle();
              $("#tg-sb-content").toggleClass('col-md-9');
              $("#tg-sb-content").toggleClass('col-md-12');
              $("#tg-sb-icon").toggleClass('fa-toggle-on');
              $("#tg-sb-icon").toggleClass('fa-toggle-off');
          });
      });
  </script>

  <!-- Controls the i18n Browser Redirection -->
  <script>
    var siteLocales = [];
    
      siteLocales.push("us-en");
    

    standardizeUrl(siteLocales, "clouddocs.netapp.com", "https://docs.netapp.com");
  </script>

  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-81697994-3"></script>
  <script>
  if (document.location.hostname === "docs.netapp.com") {
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-81697994-3');
  }
  </script>
</head>


  <body class="n-doc__component-detail">
    <a href="#n-main-content" class="visually-hidden">Skip to main content</a>
<div class="n-off-canvas-menu">
  <div class="n-off-canvas-menu__menu">
    <div class="n-off-canvas-menu__menu-inner">
      <div class="n-off-canvas-menu__property-title">NetApp Cloud Docs</div>
      <ul class="n-off-canvas-menu__property-navigation-list">
        <li class="n-off-canvas-menu__property-navigation-list-item ">
          <a href="https://docs.netapp.com/us-en/" class="n-off-canvas-menu__property-navigation-link">
            Home
          </a>
          <div class="n-off-canvas-menu__child-menu">
            <ul class="n-menu__list">

            </ul>
          </div>
        </li>
      </ul>

      <ul class="n-off-canvas-menu__global-navigation-list">
         <li class="n-off-canvas-menu__global-navigation-list-header">More From NetApp</li>
         <li class="n-off-canvas-menu__global-navigation-list-item"><a href="#" class="n-off-canvas-menu__global-navigation-link">Netapp.com</a></li>
      </ul>
    </div>
  </div>
</div>

    <div class="n-off-canvas-menu__content-wrap">
      <!-- Header -->
      <header>
  <!-- Top Hat -->
  <div class="n-top-hat">
    <div class="n-container">
      <div class="n-top-hat__cross-property-nav">
        <ul class="n-top-hat__list">
            <li class="n-top-hat__list-item">
              <a href="http://www.netapp.com" class="n-top-hat__link">NetApp.com</a>
            </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Property Bar -->
  <div class="n-property-bar n-property-bar--v3">
    <div class="n-property-bar__inner-wrap">
      <div class="n-property-bar__menu-toggle">
        <a href="#" class="n-property-bar__menu-toggle-link"><span class="n-property-bar__menu-toggle-text">Menu</span><svg class="n-icon-bars n-property-bar__menu-toggle-icon" aria-labelledby="title">
          <title>bars</title>
          <use xlink:href="/cloudinsights/common/svg/sprite.svg#bars"></use>
        </svg></a>
      </div>
      <div class="n-property-bar__property-mark n-property-bar__property-mark--has-property-name">
        <a class="n-property-bar__property-link" href="https://docs.netapp.com/us-en/">
          <div class="n-property-bar__logo">
            <svg class="n-icon-netapp-mark n-property-bar__netapp-mark-icon" aria-labelledby="title">
              <title>netapp-mark</title>
              <use xlink:href="/cloudinsights/common/svg/sprite.svg#netapp-mark"></use>
            </svg>
            <svg class="n-property-bar__logo-svg" aria-labelledby="title">
              <title>NetApp</title>
              <use xlink:href="/cloudinsights/common/svg/sprite.svg#netapp-logo"></use>
            </svg>
          </div>
          <h2 class="n-property-bar__property-name">Cloud Docs</h2>
        </a>
      </div>

      
      <div id="search-demo-container" class="n-property-bar__search">
        <div id="react-search"></div>
      </div>
      

      <div id="ie-i18n-menu" class="n-property-bar__utils">
        <ul class="n-property-navigation-bar__utils-list">
          <li class="n-property-navigation-bar__utils-list-item ie-i18n-container">
            <a href="#" class="n-property-navigation-bar__utils-link n-property-navigation-bar__nav-link n-property-navigation-bar__language-selector-toggle ie-i18n-link" data-menu-id="n-property-navigation-bar__menu--language-selector">
              <span class="ie-i18n-lang">English</span>
              <svg class="ie-i18n-icon-container" class="n-property-bar__logo-svg" aria-labelledby="title">
                <title>globe</title>
                <use xlink:href="/cloudinsights/common/svg/sprite.svg#globe" class="n-icon-globe n-globe__icon"></use>
              </svg>
            </a>
          </li>
        </ul>
      </div>
    </div>

    <div class="n-property-bar__menus">
      <div id="n-property-navigation-bar__menu--language-selector" class="n-menu n-menu--v3">
        <div class="n-language-selector-menu">
          <div class="n-language-selector-menu__header">
            <span class="n-language-selector-menu__title">Select Your Language</span>
          </div>
          <ul class="n-menu__list">
            <li class="n-menu__list-column">
              <ul class="n-menu__list">


                
                
                <li class="n-menu__list-item n-menu__list-item--level-1">
                  <a href="/cloudinsights/us-en/" class="n-menu__header-text">English</a>
                </li>
                
                
              </ul>
            </li>
          </ul>
          <div class="menu__footer">
            <p>Current Language: English
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>


      <!-- Content -->
      <main role="main" id="n-main-content" class="n-main-content">
        <div class="n-container">
  <div class="n-row">
    <div class="n-doc n-doc__component-list">
      <!-- Sidebar Column -->
      
      <div class="col-md-3" >
          

<ul id="mysidebar" class="nav">
  

  
    <li><a href="index.html">Cloud Insights documentation</a></li>
  

  
    <li><a href="concept_whats_new.html">What's New</a></li>
  

  
    <li><a href="task_cloud_insights_onboarding_1.html">Signing Up for Cloud Insights</a></li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Getting Started</a>
      <ul>
        

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Collecting Data</a>
      <ul>
        

  
    <li><a href="task_getting_started_with_cloud_insights.html">Overview</a></li>
  

  
    <li><a href="concept_acquisition_unit_requirements.html">Acquisition Unit Requirements</a></li>
  

  
    <li><a href="task_configure_acquisition_unit.html">Configuring an Acquisition Unit</a></li>
  

  
    <li class="active"><a href="task_config_telegraf_agent.html">Configuring an Agent</a></li>
  

  
    <li><a href="task_configure_data_collectors.html">Configuring Data Collectors</a></li>
  

  
    <li><a href="concept_determining_data_collector_acq_status.html">Determining Data Collector Acquisition Status</a></li>
  

  
    <li><a href="task_view_configured_data_collectors.html">Manage Configured Data Collectors</a></li>
  

  
    <li><a href="task_research_failed_collector.html">Research data collector errors</a></li>
  


      </ul>
    </li>
  

  
    <li><a href="concept_import_from_dashboard_gallery.html">Importing Recommended Dashboards</a></li>
  

  
    <li><a href="concept_user_roles.html">User Accounts and Roles</a></li>
  

  
    <li><a href="concept_other_cloud_products.html">Switching to Other Cloud Central Products</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Infrastructure Data Collector Reference</a>
      <ul>
        

  
    <li><a href="concept_data_collector_reference.html">Vendor Reference Overview</a></li>
  

  
    <li><a href="task_dc_amazon_ec2.html">AWS</a></li>
  

  
    <li><a href="task_dc_ms_azure.html">Azure</a></li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Broadcom</a>
      <ul>
        

  
    <li><a href="task_dc_brocade_bna.html">Brocade Network Advisor</a></li>
  

  
    <li><a href="task_dc_brocade_fc_switch.html">Fibre Channel Switch</a></li>
  


      </ul>
    </li>
  

  
    <li><a href="task_dc_ceph_storage.html">Ceph</a></li>
  

  
    <li><a href="task_dc_cisco_fc_switch.html">Cisco</a></li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Dell</a>
      <ul>
        

  
    <li><a href="task_dc_dell_compellent.html">Compellent Storage</a></li>
  

  
    <li><a href="task_dc_dell_xc_series.html">XC series</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Dell EMC</a>
      <ul>
        

  
    <li><a href="task_dc_emc_datadomain.html">Data Domain</a></li>
  

  
    <li><a href="task_dc_emc_isilon.html">Isilon</a></li>
  

  
    <li><a href="task_dc_emc_recoverpoint.html">RecoverPoint</a></li>
  

  
    <li><a href="task_dc_emc_scaleio.html">ScaleIO</a></li>
  

  
    <li><a href="task_dc_emc_unity.html">Unity (VNXe)</a></li>
  

  
    <li><a href="task_dc_emc_vmax_powermax.html">VMAX/PowerMax</a></li>
  

  
    <li><a href="task_dc_emc_vnx_block.html">VNX Block (Clariion)</a></li>
  

  
    <li><a href="task_dc_emc_vnx_file.html">VNX File (Celerra)</a></li>
  

  
    <li><a href="task_dc_emc_vnx_unified.html">VNX Unified</a></li>
  

  
    <li><a href="task_dc_emc_vplex.html">VPLEX</a></li>
  

  
    <li><a href="task_dc_emc_xio.html">XtremIO</a></li>
  


      </ul>
    </li>
  

  
    <li><a href="task_dc_fujitsu_eternus.html">Fujitsu</a></li>
  

  
    <li><a href="task_dc_google_cloud.html">Google</a></li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">HP Enterprise</a>
      <ul>
        

  
    <li><a href="task_dc_hp_3par.html">HP 3PAR StoreServ</a></li>
  

  
    <li><a href="task_dc_hpe_commandview.html">HP Command View AE</a></li>
  

  
    <li><a href="task_dc_hpe_nimble.html">HPE Nimble</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Hitachi Data Systems</a>
      <ul>
        

  
    <li><a href="task_dc_hds_commandsuite.html">HDS Command Suite</a></li>
  

  
    <li><a href="task_dc_hds_nas.html">HDS HNAS</a></li>
  


      </ul>
    </li>
  

  
    <li><a href="task_dc_infinidat_infinibox.html">Infinidat</a></li>
  

  
    <li><a href="task_dc_huawei_oceanstor.html">Huawei</a></li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">IBM</a>
      <ul>
        

  
    <li><a href="task_dc_ibm_cs.html">CS Series</a></li>
  

  
    <li><a href="task_dc_ibm_ds.html">System Storage DS8000 Series</a></li>
  

  
    <li><a href="task_dc_ibm_powervm.html">PowerVM</a></li>
  

  
    <li><a href="task_dc_ibm_svc.html">San Volume Controller (SVC)</a></li>
  

  
    <li><a href="task_dc_ibm_xiv.html">XIV/A9000</a></li>
  


      </ul>
    </li>
  

  
    <li><a href="task_dc_lenovo.html">Lenovo</a></li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Microsoft</a>
      <ul>
        

  
    <li><a href="task_dc_ms_hyperv.html">Hyper-V</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">NetApp</a>
      <ul>
        

  
    <li><a href="task_dc_na_cloud_volumes.html">Cloud Volumes</a></li>
  

  
    <li><a href="task_dc_na_cdot.html">ONTAP Data Management Software</a></li>
  

  
    <li><a href="task_dc_na_7mode.html">Data ONTAP 7-mode</a></li>
  

  
    <li><a href="task_dc_na_eseries.html">E-Series</a></li>
  

  
    <li><a href="task_dc_na_hci.html">NetApp HCI Management Server</a></li>
  

  
    <li><a href="task_dc_na_solidfire.html">SolidFire</a></li>
  

  
    <li><a href="task_dc_na_storagegrid.html">StorageGRID</a></li>
  


      </ul>
    </li>
  

  
    <li><a href="task_dc_nutanix.html">Nutanix</a></li>
  

  
    <li><a href="task_dc_openstack.html">OpenStack</a></li>
  

  
    <li><a href="task_dc_oracle_zfs.html">Oracle</a></li>
  

  
    <li><a href="task_dc_pure_flasharray.html">Pure</a></li>
  

  
    <li><a href="task_dc_redhat_virtualization.html">Red Hat</a></li>
  

  
    <li><a href="task_dc_vmware.html">VMWare</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Services Data Collector Reference</a>
      <ul>
        

  
    <li><a href="concept_telegraf_display_options.html">Display Options</a></li>
  

  
    <li><a href="task_config_telegraf_node.html">Host/Node</a></li>
  

  
    <li><a href="task_config_telegraf_activemq.html">ActiveMQ</a></li>
  

  
    <li><a href="task_config_telegraf_apache.html">Apache</a></li>
  

  
    <li><a href="task_config_telegraf_consul.html">Consul</a></li>
  

  
    <li><a href="task_config_telegraf_couchbase.html">Couchbase</a></li>
  

  
    <li><a href="task_config_telegraf_couchdb.html">CouchDB</a></li>
  

  
    <li><a href="task_config_telegraf_docker.html">Docker</a></li>
  

  
    <li><a href="task_config_telegraf_elasticsearch.html">Elasticsearch</a></li>
  

  
    <li><a href="task_config_telegraf_flink.html">Flink</a></li>
  

  
    <li><a href="task_config_telegraf_hadoop.html">Hadoop</a></li>
  

  
    <li><a href="task_config_telegraf_haproxy.html">HAProxy</a></li>
  

  
    <li><a href="task_config_telegraf_jvm.html">Java</a></li>
  

  
    <li><a href="task_config_telegraf_kafka.html">Kafka</a></li>
  

  
    <li><a href="task_config_telegraf_kapacitor.html">Kapacitor</a></li>
  

  
    <li><a href="task_config_telegraf_kibana.html">Kibana</a></li>
  

  
    <li><a href="task_config_telegraf_kubernetes.html">Kubernetes</a></li>
  

  
    <li><a href="task_config_telegraf_memcached.html">Memcached</a></li>
  

  
    <li><a href="task_config_telegraf_mongodb.html">MongoDB</a></li>
  

  
    <li><a href="task_config_telegraf_mysql.html">MySQL</a></li>
  

  
    <li><a href="task_config_telegraf_netstat.html">Netstat</a></li>
  

  
    <li><a href="task_config_telegraf_nginx.html">Nginx</a></li>
  

  
    <li><a href="task_config_telegraf_openzfs.html">OpenZFS</a></li>
  

  
    <li><a href="task_config_telegraf_postgresql.html">PostgreSQL</a></li>
  

  
    <li><a href="task_config_telegraf_puppetagent.html">Puppet</a></li>
  

  
    <li><a href="task_config_telegraf_redis.html">Redis</a></li>
  

  
    <li><a href="task_config_telegraf_rethinkdb.html">RethinkDB</a></li>
  

  
    <li><a href="task_config_telegraf_zookeeper.html">Zookeeper</a></li>
  


      </ul>
    </li>
  

  
    <li><a href="concept_subscribing_to_cloud_insights.html">Subscribing to Cloud Insights</a></li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Creating Dashboards</a>
      <ul>
        

  
    <li><a href="concept_dashboards_overview.html">Dashboard Overview</a></li>
  

  
    <li><a href="concept_dashboard_features.html">Features of Dashboards</a></li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Sample Dashboards</a>
      <ul>
        

  
    <li><a href="task_dashboard_example_VM_performance.html">Virtual Machine Performance</a></li>
  


      </ul>
    </li>
  

  
    <li><a href="concept_dashboard_best_practices.html">Dashboard Best Practices</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Working with Queries</a>
      <ul>
        

  
    <li><a href="concept_querying_assets.html">Querying Assets</a></li>
  

  
    <li><a href="task_create_query.html">Creating a Query</a></li>
  

  
    <li><a href="task_view_queries.html">Viewing Available Queries</a></li>
  

  
    <li><a href="task_export_query_results.html">Exporting Query Results to .CSV</a></li>
  

  
    <li><a href="task_modify_delete_query.html">Modifying or Deleting a Query</a></li>
  

  
    <li><a href="task_query_assign_multiple_applicationss.html">Assigning Multiple Applications/Annotations to Objects</a></li>
  

  
    <li><a href="task_query_copy_table_values.html">Copying table values to the Clipboard</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">All About Annotations</a>
      <ul>
        

  
    <li><a href="task_defining_annotations.html">Defining Annotations</a></li>
  

  
    <li><a href="task_create_annotation.html">Using Annotations</a></li>
  

  
    <li><a href="task_create_annotation_rules.html">Using Annotation Rules</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Working with Applications</a>
      <ul>
        

  
    <li><a href="concept_about_applications.html">Application Concepts</a></li>
  

  
    <li><a href="task_create_application.html">Configuring Applications</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Performance Policies and Alerts</a>
      <ul>
        

  
    <li><a href="task_create_performance_policies.html">Alerting with Performance Policies</a></li>
  

  
    <li><a href="concept_notifications_email.html">Configuring Notification Recipients</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Monitoring your Environment</a>
      <ul>
        

  
    <li><a href="concept_audit.html">Auditing Events</a></li>
  

  
    <li><a href="concept_ttl_and_downsampling.html">TTL and Downsampling</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Asset Page Information</a>
      <ul>
        

  
    <li><a href="concept_asset_page_overview.html">Asset Page Overview</a></li>
  

  
    <li><a href="concept_in_context_filters.html">In-Context Filtering for Objects</a></li>
  

  
    <li><a href="concept_asset_summary_section.html">Summary & Topology Sections</a></li>
  

  
    <li><a href="concept_asset_expert_view_section.html">Expert View Section</a></li>
  

  
    <li><a href="concept_asset_user_data_section.html">User Data Section</a></li>
  

  
    <li><a href="concept_asset_violation_section.html">Violations Section</a></li>
  

  
    <li><a href="concept_searching_assets.html">Hints and Tips to Search for Assets</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Troubleshooting</a>
      <ul>
        

  
    <li><a href="concept_troubleshooting_overview.html">Troubleshooting Overview</a></li>
  

  
    <li><a href="task_troubleshooting_linux_acquisition_unit_problems.html">Troubleshooting Linux Acquisition Unit Problems</a></li>
  

  
    <li><a href="task_troubleshooting_windows_acquisition_unit_problems.html">Troubleshooting Windows Acquisition Unit Problems</a></li>
  

  
    <li><a href="task_research_failed_collector.html">Researching Data Collector Errors</a></li>
  


      </ul>
    </li>
  

  
    <!-- Check Container -->
    <li class="subfolders">
      <a href="#">Reference & Support</a>
      <ul>
        

  
    <li><a href="concept_requesting_support.html">Requesting Support</a></li>
  

  
    <li><a href="reference_data_collector_support_matrix.html">Data Collector Support Matrix</a></li>
  

  
    <li><a href="reference_object_icons.html">Object Icon Reference</a></li>
  


      </ul>
    </li>
  


</ul>

<!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
<script>$("li.active").parents('li').toggleClass("active");</script>

      </div>
      

      <div class="n-doc__component-detail-content n-doc__component-detail-content--show-code">
        <!-- Begin of page container -->
        <article class="page-content">
          

<div class="n-doc__component-detail-heading-wrap">
  <h1 class="n-doc__component-detail-heading">Configuring an Agent to Collect Data
    <span>
      
        <a target="_blank" href="https://github.com/NetAppDocs/cloudinsights/blob/master/task_config_telegraf_agent.adoc" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit on GitHub</a>
        <a target="_blank" href="https://github.com/NetAppDocs/cloudinsights/issues/new?body=Page%3A%20[Configuring an Agent to Collect Data](https://docs.netapp.com/us-en/cloudinsights/task_config_telegraf_agent.html)" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Request doc changes</a>
      
    </span>
  </h1>
</div>

<p class="page-details">

<time datetime="2019-09-06 17:56:55 +0000">09/06/2019</time>


<span>Contributors
  
  <a target="_blank" href="https://github.com/netapp-alavoie">
    <img  class="avatar avatar-small"
          alt="netapp-alavoie"
          width="20" height="20"
          src="https://avatars0.githubusercontent.com/u/39956590?v=4"
          style="border-radius: 50%;"/>
  </a>
  
  <a target="_blank" href="https://github.com/dgracenetapp">
    <img  class="avatar avatar-small"
          alt="dgracenetapp"
          width="20" height="20"
          src="https://avatars0.githubusercontent.com/u/38116247?v=4"
          style="border-radius: 50%;"/>
  </a>
  
</span>

</p>

<div id="preamble">
<div class="sectionbody">
<div class="paragraph lead">
<p>Cloud Insights uses <a href="https://docs.influxdata.com/telegraf/v1.9/">Telegraf</a> as its agent for collection of integration data. Telegraf is a plugin-driven server agent that can be used to collect and report metrics, events, and logs. Input plugins are used to collect the desired information into the agent by accessing the system/OS directly, by calling third-party APIs, or by listening to configured streams (i.e. Kafka, statsD, etc). Output plugins are used to send the collected metric, events, and logs from the agent to Cloud Insights.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="installing-an-agent">Installing an Agent</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This topic provides instructions for installing the Telegraf agent on the following platforms:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#windows">Windows</a></p>
</li>
<li>
<p><a href="#rhel-and-centos">RHEL and CentOS</a></p>
</li>
<li>
<p><a href="#ubuntu-and-debian">Ubuntu and Debian</a></p>
</li>
<li>
<p><a href="#macos">macOS</a></p>
</li>
<li>
<p><a href="#kubernetes">Kubernetes</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To install an agent, regardless of the platform you are using, you must first do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log into the host you will use for your agent.</p>
</li>
<li>
<p>Log in to your Cloud Insights site and go to <strong>Admin &gt; Data Collectors</strong>.</p>
</li>
<li>
<p>Click on <strong>+Data Collector</strong> and choose a data collector to install. There are several types of data collectors:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Host</strong> (Windows, Linux, macOS, etc.)</p>
</li>
<li>
<p><strong>Service</strong> (integration with a wide variety of agent-collected plugins). Agents are configured and run as a service for RHEL/CentOS, Ubuntu/Debian, macOS, and Windows. For Kubernetes platforms, the agent in configured as a DaemonSet.</p>
</li>
<li>
<p><strong>Infrastructure</strong> (collects from storage, switch, cloud platform, etc.). Infrastructure collection is done with an <a href="task_configure_acquisition_unit.html">Acquisition Unit</a> instead of an Agent.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Choose the appropriate platform for your host (Windows, Linux, macOS, etc.)</p>
</li>
<li>
<p>Follow the remaining steps for each platform below</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Once you have installed an agent on a host, you do not need to install an agent again on that host.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Once you have installed an agent on a server/VM, Cloud Insights collects metrics from that system in addition to collecting from any data collectors you configure. These metrics are gathered as <a href="task_config_telegraf_node.html">"Node" metrics</a>.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="windows">Windows</h3>
<div class="paragraph">
<p><span class="image"><img src="./media/AgentInstallWindows.png" alt="Windows Agent Install"></span></p>
</div>
<div class="ulist">
<div class="title">Pre-requisites:</div>
<ul>
<li>
<p>PowerShell must be installed</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Steps to install agent on Windows:</div>
<ol class="arabic">
<li>
<p>If prompted, select Windows from the Platform drop-down.</p>
</li>
<li>
<p>Choose an Agent Access Key.</p>
</li>
<li>
<p>Copy the command block from the agent installation dialog. You can click the clipboard icon to quickly copy the command to the clipboard.</p>
</li>
<li>
<p>Open a PowerShell window</p>
</li>
<li>
<p>Paste the command into the PowerShell window and press Enter.</p>
</li>
<li>
<p>The command will download the appropriate agent installer, install it, and set a default configuration. When finished, it will restart the agent service. The command has a unique key and is valid for 24 hours.</p>
</li>
<li>
<p>Click <strong>Finish</strong> or <strong>Continue</strong></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After the agent is installed, you can use the following commands to start/stop the service:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Start-Service telegraf
Stop-Service telegraf</pre>
</div>
</div>
<div class="sect3">
<h4 id="uninstalling-the-agent">Uninstalling the Agent</h4>
<div class="paragraph">
<p>To uninstall the agent on Windows, do the following in a PowerShell window:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop and Delete the Telegraf service:</p>
<div class="literalblock">
<div class="content">
<pre>Stop-Service telegraf
sc.exe delete telegraf</pre>
</div>
</div>
</li>
<li>
<p>Delete the <em>C:\Program Files\telegraf</em> folder to remove the binary, logs, and configuration files</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="rhel-and-centos">RHEL and CentOS</h3>
<div class="paragraph">
<p><span class="image"><img src="./media/AgentInstallRHELCentOS.png" alt="RHEL/CentOS Agent Install"></span></p>
</div>
<div class="ulist">
<div class="title">Pre-requisites:</div>
<ul>
<li>
<p>The following commands must be available: curl, sudo, ping, and dmidecode</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Steps to install agent on RHEL/CentOS:</div>
<ol class="arabic">
<li>
<p>If prompted, select RHEL/CentOS from the Platform drop-down.</p>
</li>
<li>
<p>Choose an Agent Access Key.</p>
</li>
<li>
<p>Copy the command block from the agent installation dialog. You can click the clipboard icon to quickly copy the command to the clipboard.</p>
</li>
<li>
<p>Open a Bash window</p>
</li>
<li>
<p>Paste the command into the Bash window and press Enter.</p>
</li>
<li>
<p>The command will download the appropriate agent installer, install it, and set a default configuration. When finished, it will restart the agent service. The command has a unique key and is valid for 24 hours.</p>
</li>
<li>
<p>Click <strong>Finish</strong> or <strong>Continue</strong></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After the agent is installed, you can use the following commands to start/stop the service:</p>
</div>
<div class="paragraph">
<p>If your operating system is using systemd (CentOS 7+ and RHEL 7+):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo systemctl start telegraf
sudo systemctl stop telegraf</pre>
</div>
</div>
<div class="paragraph">
<p>If your operating system is not using systemd (CentOS 7+ and RHEL 7+):</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo service telegraf start
sudo service telegraf stop</pre>
</div>
</div>
<div class="sect3">
<h4 id="uninstalling-the-agent-2">Uninstalling the Agent</h4>
<div class="paragraph">
<p>To uninstall the agent on RHEL/CentOS, in a Bash terminal, do the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop the Telegraf service using the following command:</p>
<div class="literalblock">
<div class="content">
<pre>systemctl stop telegraf (If your operating system is using systemd (CentOS 7+ and RHEL 7+)
/etc/init.d/telegraf stop (for systems without systemd support)</pre>
</div>
</div>
</li>
<li>
<p>Remove the Telegraf package:</p>
<div class="literalblock">
<div class="content">
<pre>yum remove telegraf</pre>
</div>
</div>
</li>
<li>
<p>Remove any configuration or log files that may be left behind:</p>
<div class="literalblock">
<div class="content">
<pre>rm -rf /etc/telegraf*
rm -rf /var/log/telegraf*</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ubuntu-and-debian">Ubuntu and Debian</h3>
<div class="paragraph">
<p><span class="image"><img src="./media/AgentInstallUbuntuDebian.png" alt="Ubuntu/Debian Agent Install"></span></p>
</div>
<div class="ulist">
<div class="title">Pre-requisites:</div>
<ul>
<li>
<p>The following commands must be available: curl, sudo, ping, and dmidecode</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Steps to install agent on Debian or Ubuntu:</div>
<ol class="arabic">
<li>
<p>If prompted, select Ubuntu/Debian from the Platform drop-down.</p>
</li>
<li>
<p>Choose an Agent Access Key.</p>
</li>
<li>
<p>Copy the command block from the agent installation dialog. You can click the clipboard icon to quickly copy the command to the clipboard.</p>
</li>
<li>
<p>Open a Bash window</p>
</li>
<li>
<p>Paste the command into the Bash window and press Enter.</p>
</li>
<li>
<p>The command will download the appropriate agent installer, install it, and set a default configuration. When finished, it will restart the agent service. The command has a unique key and is valid for 24 hours.</p>
</li>
<li>
<p>Click <strong>Finish</strong> or <strong>Continue</strong></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After the agent is installed, you can use the following commands to start/stop the service:</p>
</div>
<div class="paragraph">
<p>If your operating system is using systemd:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo systemctl start telegraf
sudo systemctl stop telegraf</pre>
</div>
</div>
<div class="paragraph">
<p>If your operating system is not using systemd:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo service telegraf start
sudo service telegraf stop</pre>
</div>
</div>
<div class="sect3">
<h4 id="uninstalling-the-agent-3">Uninstalling the Agent</h4>
<div class="paragraph">
<p>To uninstall the agent on Ubuntu/Debian, in a Bash terminal, run the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop the Telegraf service using the following command:</p>
<div class="literalblock">
<div class="content">
<pre>systemctl stop telegraf (If your operating system is using systemd)
/etc/init.d/telegraf stop (for systems without systemd support)</pre>
</div>
</div>
</li>
<li>
<p>Remove the Telegraf package:</p>
<div class="literalblock">
<div class="content">
<pre>dpkg -r telegraf</pre>
</div>
</div>
</li>
<li>
<p>Remove any configuration or log files that may be left behind:</p>
<div class="literalblock">
<div class="content">
<pre>rm -rf /etc/telegraf*
rm -rf /var/log/telegraf*</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="macos">macOS</h3>
<div class="paragraph">
<p><span class="image"><img src="./media/AgentInstallMacOS.png" alt="MacOS Agent Install"></span></p>
</div>
<div class="ulist">
<div class="title">Pre-requisites:</div>
<ul>
<li>
<p>The "curl" command must be available</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Steps to install agent on macOS:</div>
<ol class="arabic">
<li>
<p>If prompted, select macOS from the Platform drop-down.</p>
</li>
<li>
<p>Choose an Agent Access Key.</p>
</li>
<li>
<p>Copy the command block from the agent installation dialog. You can click the clipboard icon to quickly copy the command to the clipboard.</p>
</li>
<li>
<p>Open a Bash window</p>
</li>
<li>
<p>Paste the command into the Bash window and press Enter.</p>
</li>
<li>
<p>The command will download the appropriate agent installer, install it, and set a default configuration. When finished, it will restart the agent service. The command has a unique key and is valid for 24 hours.</p>
</li>
<li>
<p>If you previously installed a Telegraf agent using Homebrew, you will be prompted to uninstall it. Once the previously installed Telegraf agent is uninstalled, re-run the command in step 5 above.</p>
</li>
<li>
<p>Click <strong>Finish</strong> or <strong>Continue</strong></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After the agent is installed, you can use the following commands to start/stop the service:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo launchctl start telegraf
sudo launchctl stop telegraf</pre>
</div>
</div>
<div class="sect3">
<h4 id="uninstalling-the-agent-4">Uninstalling the Agent</h4>
<div class="paragraph">
<p>To uninstall the agent on macOS, in a Bash terminal, run the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop the Telegraf service using the following command:</p>
<div class="literalblock">
<div class="content">
<pre>sudo launchctl stop telegraf</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Copy the Uninstall command to /tmp and execute it:</p>
<div class="literalblock">
<div class="content">
<pre>cp /Applications/telegraf.app/scripts/uninstall /tmp</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>sudo /tmp/uninstall</pre>
</div>
</div>
</li>
<li>
<p>Remove any configuration or log files that may be left behind:</p>
<div class="literalblock">
<div class="content">
<pre>rm -rf /usr/local/etc/telegraf*
rm -rf /usr/local/var/log/telegraf.*</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="kubernetes">Kubernetes</h3>
<div class="paragraph">
<p><span class="image"><img src="./media/AgentInstallKubernetes.png" alt="Kubernetes Agent Install"></span></p>
</div>
<div class="ulist">
<div class="title">Pre-requisites:</div>
<ul>
<li>
<p>The following commands must be available: curl and sudo</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Steps to install agent on Kubernetes:</div>
<ol class="arabic">
<li>
<p>If prompted, select Kubernetes from the Platform drop-down.</p>
</li>
<li>
<p>Choose an Agent Access Key.</p>
</li>
<li>
<p>Copy the command block from the agent installation dialog. You can click the clipboard icon to quickly copy the command to the clipboard.</p>
</li>
<li>
<p>Open a Bash window</p>
</li>
<li>
<p>Paste the command into the Bash window and press Enter.</p>
</li>
<li>
<p>The command will download the appropriate agent installer, install it, and set a default configuration. When finished, it will restart the agent service. The command has a unique key and is valid for 24 hours.</p>
</li>
<li>
<p>Click <strong>Finish</strong> or <strong>Continue</strong></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After the agent is installed, generate the Telegraf DaemonSet YAML and ReplicaSet YAML:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>kubectl --namespace monitoring get ds telegraf-ds -o yaml &gt; /tmp/telegraf-ds.yaml
kubectl --namespace monitoring get rs telegraf-rs -o yaml &gt; /tmp/telegraf-rs.yaml</pre>
</div>
</div>
<div class="paragraph">
<p>You can use the following commands to stop and start the Telegraf service:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>kubectl --namespace monitoring delete ds telegraf-ds
kubectl --namespace monitoring delete ds telegraf-rs</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>kubectl --namespace monitoring apply -f /tmp/telegraf-ds.yaml
kubectl --namespace monitoring apply -f /tmp/telegraf-rs.yaml</pre>
</div>
</div>
<div class="sect3">
<h4 id="configuring-the-agent-to-collect-data-from-kubernetes">Configuring the Agent to Collect Data from Kubernetes</h4>
<div class="paragraph">
<p>For Kubernetes environments, Cloud Insights deploys the Telegraf agent as a DaemonSet and a ReplicaSet. The pods in which the agents run need to have access to the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>hostPath</p>
</li>
<li>
<p>configMap</p>
</li>
<li>
<p>secrets</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These Kubernetes objects are automatically created as part of the Kubernetes agent install command provided in the Cloud Insights UI. Some variants of Kubernetes, such as OpenShift, implement an added level of security that may block access to these components. The <em>SecurityContextConstraint</em> is not created as part of the Kubernetes agent install command provided in the Cloud Insights UI, and must be created manually. Once created, restart the Telegraf pod(s).</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    apiVersion: v1
    kind: SecurityContextConstraints
    metadata:
      name: telegraf-hostaccess
      creationTimestamp:
      annotations:
        kubernetes.io/description: telegraf-hostaccess allows hostpath volume mounts for restricted SAs.
      labels:
        app: ci-telegraf
    priority: 10
    allowPrivilegedContainer: false
    defaultAddCapabilities: []
    requiredDropCapabilities: []
    allowedCapabilities: []
    allowedFlexVolumes: []
    allowHostDirVolumePlugin: true
    volumes:
    - hostPath
    - configMap
    - secret
    allowHostNetwork: false
    allowHostPorts: false
    allowHostPID: false
    allowHostIPC: false
    seLinuxContext:
      type: MustRunAs
    runAsUser:
      type: RunAsAny
    supplementalGroups:
      type: RunAsAny
    fsGroup:
      type: RunAsAny
    readOnlyRootFilesystem: false
    users:
    - system:serviceaccount:monitoring:telegraf-user
    groups: []</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="installing-the-kube-state-metrics-server">Installing the kube-state-metrics server</h4>
<div class="paragraph">
<p>When you install the kube-state-metrics server you can enable colletction of the following Kubernetes objects: StatefulSet, DaemonSet, Deployment, PV, PVC, ReplicaSet, Service, Namespace, Secret, ConfigMap, Pod Volume, and Ingress.</p>
</div>
<div class="paragraph">
<p>Use the following steps to install the kube-state-metrics server:</p>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p>Create a temporary folder (for example, <em>/tmp/kube-state-yaml-files/</em>) and copy the .yaml files from <a href="https://github.com/kubernetes/kube-state-metrics/tree/master/kubernetes" class="bare">https://github.com/kubernetes/kube-state-metrics/tree/master/kubernetes</a> to this folder.</p>
</li>
<li>
<p>Run the following command to apply the .yaml files needed for installing kube-state-metrics:</p>
<div class="literalblock">
<div class="content">
<pre>kubectl apply -f /tmp/kube-state-yaml-files/</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="kube-state-metrics-counters">kube-state-metrics Counters</h4>
<div class="paragraph">
<p>Use the following links to access information for the kube state metrics counters:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="https://github.com/kubernetes/kube-state-metrics/blob/master/docs/cronjob-metrics.md">Cronjob Metrics</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/kube-state-metrics/blob/master/docs/daemonset-metrics.md">DaemonSet Metrics</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/kube-state-metrics/blob/master/docs/deployment-metrics.md">Deployment Metrics</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/kube-state-metrics/blob/master/docs/endpoint-metrics.md">Endpoint Metrics</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/kube-state-metrics/blob/master/docs/horizontalpodautoscaler-metrics.md">Horizontal Pod Autoscaler Metrics</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/kube-state-metrics/blob/master/docs/ingress-metrics.md">Ingress Metrics</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/kube-state-metrics/blob/master/docs/ingress-metrics.md">Job Metrics</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/kube-state-metrics/blob/master/docs/limitrange-metrics.md">LimitRange Metrics</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/kube-state-metrics/blob/master/docs/namespace-metrics.md">Namespace Metrics</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/kube-state-metrics/blob/master/docs/node-metrics.md">Node Metrics</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/kube-state-metrics/blob/master/docs/persistentvolume-metrics.md">Persistent Volume Metrics</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/kube-state-metrics/blob/master/docs/persistentvolumeclaim-metrics.md">Persistant Volume Claim Metrics</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/kube-state-metrics/blob/master/docs/pod-metrics.md">Pod Metrics</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/kube-state-metrics/blob/master/docs/poddisruptionbudget-metrics.md">Pod Disruption Budget Metrics</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/kube-state-metrics/blob/master/docs/replicaset-metrics.md">ReplicaSet metrics</a></p>
</li>
<li>
<p><a href="https://github.com/kubernetes/kube-state-metrics/blob/master/docs/replicationcontroller-metrics.md">ReplicationController Metrics</a></p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="uninstalling-the-agent-5">Uninstalling the Agent</h4>
<div class="paragraph">
<p>To uninstall the agent on Kubernetes, do the following:</p>
</div>
<div class="paragraph">
<p>If the monitoring namespace is being used solely for Telegraf:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>kubectl delete ns monitoring</pre>
</div>
</div>
<div class="paragraph">
<p>If the monitoring namespace is being used for other purposes in addition to Telegraf:</p>
</div>
<div class="paragraph">
<p>Stop and delete the Telegraf service:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>kubectl --namespace monitoring delete ds telegraf-ds
kubectl --namespace monitoring delete rs telegraf-rs</pre>
</div>
</div>
<div class="paragraph">
<p>Delete the Telegraf ConfigMap and ServiceAccount:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>kubectl --namespace monitoring delete cm telegraf-conf
kubectl --namespace monitoring delete cm telegraf-conf-rs
kubectl --namespace monitoring delete sa telegraf-user</pre>
</div>
</div>
<div class="paragraph">
<p>Delete the Telegraf ClusterRole and ClusterRolebinding:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>kubectl --namespace monitoring delete clusterrole endpoint-access
kubectl --namespace monitoring delete clusterrolebinding endpoint-access</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="troubleshooting-agent-installation">Troubleshooting Agent Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some things to try if you encounter problems setting up an agent:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Problem:</th>
<th class="tableblock halign-left valign-top">Try this:</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">I already installed an agent using Cloud Insights</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If you have already installed an agent on your host/VM, you do not need to install the agent again. In this case, simply choose the appropriate Platform and Key in the Agent Installation screen, and click on <strong>Continue</strong> or <strong>Finish</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">I already have an agent installed but not by using the Cloud Insights installer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove the previous agent and run the Cloud Insights Agent installation, to ensure proper default configuration file settings. When complete, click on <strong>Continue</strong> or <strong>Finish</strong>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Additional information may be found from the <a href="concept_requesting_support.html">Support</a> page or in the <a href="https://docs.netapp.com/us-en/cloudinsights/CloudInsightsDataCollectorSupportMatrix.pdf">Data Collector Support Matrix</a>.</p>
</div>
</div>
</div>

        </article>
        <!-- Page Container -->
      </div>

      
      <div class="page-nav-container">
        <nav class="page-nav-fixed">
          <div class="page-nav-title">On this page:</div>
          <ul class="page-nav-inner" id="page-menu"></ul>
        </nav>
      </div>
      

    </div>
  </div>
</div>

      </main>

      <!-- Footer -->
      
      <footer class="n-footer n-footer--v1" style="border-top: solid 10px #DFDFDF;">
        <div class="n-footer__bottom">
          <div class="n-container">
            <div class="n-footer__bottom-left">
              <div class="n-footer__copyright">
                  <a href="//www.netapp.com/us/legal/copyright.aspx" class="n-footer__copyright-link">© 2019 NetApp, Inc.</a>
              </div>
              <div class="n-footer__copyright">
                <a href="//www.netapp.com/us/legal/index.aspx" class="n-footer__copyright-link">Legal</a>
              </div>
              <div class="n-footer__social-links n-footer__copyright">
                <ul class="n-footer__social-link-list">
                  <li class="n-footer__social-link-list-item">
                    <a class="n-footer__social-link" data-ntap-social="follow-blog" href="http://blog.netapp.com" target="_blank" title="blog" alt="blog">
                      <span class="n-footer__social-link-text">blog</span>
                      <svg class="n-icon-blog n-footer__social-link-icon" aria-labelledby="title">
                        <title>blog@</title>
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/cloudinsights/common/svg/sprite.svg#blog"></use>
                      </svg>
                    </a>
                  </li>
                  <li class="n-footer__social-link-list-item">
                    <a class="n-footer__social-link" data-ntap-social="follow-community" href="http://community.netapp.com/" target="_blank" title="community" alt="community">
                      <span class="n-footer__social-link-text">community</span>
                      <svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
                        <title>community@</title>
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/cloudinsights/common/svg/sprite.svg#comments"></use>
                      </svg>
                    </a>
                  </li>

                  <li class="n-footer__social-link-list-item">
                    <a class="n-footer__social-link" data-ntap-social="follow-twitter" href="https://twitter.com/netappdoc" target="_blank" title="twitter" alt="twitter">
                      <span class="n-footer__social-link-text">twitter</span>
                      <svg class="n-icon-twitter n-footer__social-link-icon" aria-labelledby="title">
                        <title>twitter@</title>
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/cloudinsights/common/svg/sprite.svg#twitter"></use>
                      </svg>
                    </a>
                  </li>
                  <li class="n-footer__social-link-list-item">
                    <a class="n-footer__social-link" data-ntap-social="follow-youtube" href="https://www.youtube.com/user/NetAppTechCommTV/" target="_blank" title="youtube" alt="youtube">
                      <span class="n-footer__social-link-text">youtube</span>
                      <svg class="n-icon-youtube n-footer__social-link-icon" aria-labelledby="title">
                        <title>youtube@</title>
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/cloudinsights/common/svg/sprite.svg#youtube"></use>
                      </svg>
                    </a>
                  </li>
                </ul>
              </div>
            </div>
            <div class="n-footer__bottom-right">
              <div class="n-footer__copyright">
                <a href="https://docs.netapp.com/us-en/contribute/" class="n-footer__copyright-link">Contribute</a>
              </div>
              <div class="n-footer__copyright">
                <a target="_self" class="n-footer__copyright-link" href="javascript:netapp_mailto()">Email your feedback</a>
              </div>
            </div>
          </div>
        </div>
      </footer>

    </div>

    <script src="/cloudinsights/common/js/components.js"></script>
    <script src="/cloudinsights/common/js/doc-components.js"></script>

    <!-- Elasticsearch JS -->
    <script type="text/javascript" src='/cloudinsights/js/bundle.js'></script>

    <!-- Syntax Highlighting -->
    <script type="text/javascript" src='/cloudinsights/js/prism.js'></script>
    <script type="text/javascript" src='/cloudinsights/js/prism-curl.js'></script>

  </body>

  
</html>
